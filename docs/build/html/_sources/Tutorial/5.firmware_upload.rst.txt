.. _firmware_upload:

Firmware Upload
===============

1. Double-click to open Flash Download Tools, then select the options as shown below:

.. list-table::
   :widths: 50 50
   :header-rows: 0

   * - .. figure:: img/flashtool1.png
          :width: 100%

     - .. figure:: img/flashtool2.png
          :width: 100%

1. Follow these steps to upload the firmware:

   A. Click the "Select File" button to choose your downloaded firmware file (.bin format)
   B. In the address input box after the bin file selection box, enter ``0 or 0x0`` (indicating that the firmware will be downloaded to the starting position of the development board's memory)
   C. Select the COM port corresponding to ESP32-S3 from the port selection dropdown menu (refer to the :ref:`install_driver` section for how to check the device manager for the specific port number)
   D. Set the baud rate (we use 465800 here)
   E. Click the "START" button to begin downloading the firmware to the ESP32-S3 development board

   .. figure:: img/flashtool3.png
      :align: center
      :width: 80%

.. figure:: img/flashtool5.png
   :align: center
   :width: 80%

3. After the download is complete, press the RST button on the development board. The board will automatically restart and enter network configuration mode
4. Connect your phone to the hotspot named Xiaozhi-XXXX. The configuration page should open automatically. If not, you can manually enter ``http://192.168.4.1`` in your browser to access the configuration interface
5. Select your WiFi network and enter the password to connect
6. The board will automatically restart, connect to your WiFi, and announce a 6-digit verification code
7. Add the device:
   * Enter the 6-digit verification code announced by the device
   * Click the "Add Device" button
   * Restart the development board to complete device binding